---
import BaseLayout from '../../layouts/BaseLayout.astro';
import ArticlePage from '../../layouts/ArticlePage.astro';
import { TOP_MENU } from '../../utils/share';
import { generateToc } from '../../utils/astro';
import { getCollection } from 'astro:content';

export async function getStaticPaths() {
  const contents = await getCollection(TOP_MENU.articles);
  return contents.map(content => ({
    params: { slug: content.slug },
    props: { content },
  }));
}

const { content } = Astro.props;
const toc = generateToc(content.rendered.metadata.headings);
---

<BaseLayout title="Articles" toc={toc} >
  <ArticlePage content={content} />
</BaseLayout>
